@page "/create"


@using Biscoitinhos.application.DTO
@inject NavigationManager navManager;
@inject Biscoitinhos.application.Interfaces.ISKUApp skuApp;

<h1>Criar SKU</h1>
<EditForm Model="skuDTO" OnValidSubmit="CreateSku">
    <div class="form-group mb-3">
        <label for="skuName">Nome</label>
        <InputText @bind-Value="skuDTO.Nome" class="form-control" id="skuName"></InputText>
    </div>

    <div class="form-group mb-3">
        <label for="skuUnidadeMedida">Unidade Medida</label>
        <InputText @bind-Value="skuDTO.UnidadeMedida" class="form-control" id="UnidadeMedida"></InputText>
    </div>

    <DataAnnotationsValidator />
    <ValidationSummary />

    <button class="btn btn-success" type="submit">Salvar</button>
</EditForm>

@code {
    SKUDTO skuDTO = new();
    async Task CreateSku()
    {
        Biscoitinhos.domain.Entidades.SKU sku = new()
            {
                Nome = skuDTO.Nome,
                UnidadeMedida = skuDTO.UnidadeMedida
            };

        skuApp.Insert(sku);
        navManager.NavigateTo("/");
    }
}
